SET TIME_ZONE = '-04:00';
ALTER DATABASE ADMIN CHARACTER SET utf8mb4 COLLATE utf8mb4_spanish_ci;
SET NAMES 'utf8mb4' COLLATE 'utf8mb4_spanish_ci';
SET collation_connection = 'utf8mb4_spanish_ci';

CREATE TABLE ADMIN.FE_USERS (
  ID_UID                          INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  PID                             INT(10) UNSIGNED DEFAULT '0',
  TSTAMP                          INT(10) UNSIGNED DEFAULT '0',
  USERNAME                        VARCHAR(50) NOT NULL,
  PASSWORD                        VARCHAR(60) NOT NULL,
  USERGROUP                       TEXT,
  DISABLE                         TINYINT(3) UNSIGNED DEFAULT '0' NOT NULL,
  STARTTIME                       INT(10) UNSIGNED DEFAULT '0',
  ENDTIME                         INT(10) UNSIGNED DEFAULT '0',
  NAME                            VARCHAR(80) NOT NULL,
  FIRST_NAME                      VARCHAR(50) NOT NULL,
  MIDDLE_NAME                     VARCHAR(50) NOT NULL,
  LAST_NAME                       VARCHAR(50) NOT NULL,
  ADDRESS                         VARCHAR(255),
  TELEPHONE                       VARCHAR(20) NOT NULL,
  FAX                             VARCHAR(20),
  EMAIL                           VARCHAR(80),
  CRDATE                          INT(10) UNSIGNED DEFAULT '0',
  CRUSER_ID                       INT(10) UNSIGNED DEFAULT '0',
  LOCKTODOMAIN                    VARCHAR(50),
  DELETED                         TINYINT(3) UNSIGNED DEFAULT '0',
  UC                              BLOB,
  TITLE                           VARCHAR(40),
  ZIP                             VARCHAR(10),
  CITY                            VARCHAR(50),
  COUNTRY                         VARCHAR(40),
  WWW                             VARCHAR(80),
  COMPANY                         VARCHAR(80),
  IMAGE                           TEXT,
  TSCONFIG                        TEXT,
  FE_CRUSER_ID                    INT(10) UNSIGNED DEFAULT '0',
  LASTLOGIN                       INT(10) UNSIGNED DEFAULT '0',
  IS_ONLINE                       INT(10) UNSIGNED DEFAULT '0',
  TX_EXTBASE_TYPE                 VARCHAR(255),
  FELOGIN_REDIRECTPID             TEXT,
  FELOGIN_FORGOTHASH              VARCHAR(80),
  TX_CHCFORUM_AIM                 TEXT,
  TX_CHCFORUM_YAHOO               TEXT,
  TX_CHCFORUM_MSN                 TEXT,
  TX_CHCFORUM_CUSTOMIM            TEXT,
  MAILHASH                        VARCHAR(60),
  ACTIVATED_ON                    INT(10) UNSIGNED DEFAULT '0',
  PSEUDONYM                       VARCHAR(50),
  GENDER                          INT(10) UNSIGNED DEFAULT '0',
  DATE_OF_BIRTH                   INT(10) UNSIGNED DEFAULT '0',
  LANGUAGE                        CHAR(2),
  ZONE                            VARCHAR(45),
  STATIC_INFO_COUNTRY             CHAR(3),
  TIMEZONE                        FLOAT DEFAULT '0',
  DAYLIGHT                        TINYINT(3) UNSIGNED DEFAULT '0',
  MOBILEPHONE                     VARCHAR(20),
  GTC                             TINYINT(3) UNSIGNED DEFAULT '0',
  PRIVACY                         TINYINT(3) UNSIGNED DEFAULT '0',
  STATUS                          INT(10) UNSIGNED DEFAULT '0',
  BY_INVITATION                   TINYINT(3) UNSIGNED DEFAULT '0',
  COMMENTS                        TEXT,
  MODULE_SYS_DMAIL_HTML           TINYINT(3) UNSIGNED DEFAULT '0',
  MODULE_SYS_DMAIL_CATEGORY       INT(10) UNSIGNED DEFAULT '0',
  TX_EXTERNALIMPORTTUT_CODE       VARCHAR(10),
  TX_EXTERNALIMPORTTUT_DEPARTMEN  TEXT,
  TX_EXTERNALIMPORTTUT_HOLIDAYS   INT(10) UNSIGNED DEFAULT '0',
  TX_INTRANETSSAN_APELLIDOPATERN  TEXT,
  TX_INTRANETSSAN_APELLIDOMATERN  TEXT,
  TX_INTRANETSSAN_CLAVEUNICA      TEXT,
  TX_INTRANETSSAN_OBLIGACAMBIARC  INT(10) UNSIGNED DEFAULT '0',
  TX_INTRANETSSAN_PREFERENCIA     VARCHAR(255),
  TX_INTRANETSSAN_RUN             BIGINT(12),
  TX_INTRANETSSAN_DV              CHAR(1),
  PRIMARY KEY (ID_UID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 

INSERT INTO ADMIN.FE_USERS(`ID_UID`, `PID`, `TSTAMP`, `USERNAME`, `PASSWORD`, `USERGROUP`, `DISABLE`, `STARTTIME`, `ENDTIME`, `NAME`, `FIRST_NAME`, `MIDDLE_NAME`, `LAST_NAME`, `ADDRESS`, `TELEPHONE`, `FAX`, `EMAIL`, `CRDATE`, `CRUSER_ID`, `LOCKTODOMAIN`, `DELETED`, `UC`, `TITLE`, `ZIP`, `CITY`, `COUNTRY`, `WWW`, `COMPANY`, `IMAGE`, `TSCONFIG`, `FE_CRUSER_ID`, `LASTLOGIN`, `IS_ONLINE`, `TX_EXTBASE_TYPE`, `FELOGIN_REDIRECTPID`, `FELOGIN_FORGOTHASH`, `TX_CHCFORUM_AIM`, `TX_CHCFORUM_YAHOO`, `TX_CHCFORUM_MSN`, `TX_CHCFORUM_CUSTOMIM`, `MAILHASH`, `ACTIVATED_ON`, `PSEUDONYM`, `GENDER`, `DATE_OF_BIRTH`, `LANGUAGE`, `ZONE`, `STATIC_INFO_COUNTRY`, `TIMEZONE`, `DAYLIGHT`, `MOBILEPHONE`, `GTC`, `PRIVACY`, `STATUS`, `BY_INVITATION`, `COMMENTS`, `MODULE_SYS_DMAIL_HTML`, `MODULE_SYS_DMAIL_CATEGORY`, `TX_EXTERNALIMPORTTUT_CODE`, `TX_EXTERNALIMPORTTUT_DEPARTMEN`, `TX_EXTERNALIMPORTTUT_HOLIDAYS`, `TX_INTRANETSSAN_APELLIDOPATERN`, `TX_INTRANETSSAN_APELLIDOMATERN`, `TX_INTRANETSSAN_CLAVEUNICA`, `TX_INTRANETSSAN_OBLIGACAMBIARC`, `TX_INTRANETSSAN_PREFERENCIA`, `TX_INTRANETSSAN_RUN`, `TX_INTRANETSSAN_DV`) VALUES
(10,	0,	0,	'16869726-0',	'$2y$10$J5PtQXl.KRXbSi0Z6zIXx.co0eUwUb6yltwHbw0pyNNELXEvbi2KC',	NULL,	0,	0,	0,	'BENJAMIN NELSON',	'CASTILLO',	'SEPULVEDA	',	'Apellido Materno',	NULL,	'0',	NULL,	'benjamin.castillo@araucanianorte.cl',	0,	0,	'$2y$10$J5PtQXl.KRXbSi0Z6zIXx.co0eUwUb6yltwHbw0pyNN',	0,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	0,	0,	0,	NULL,	'1714488190',	'Jmo1s88K',	NULL,	NULL,	NULL,	NULL,	'',	0,	NULL,	0,	0,	NULL,	NULL,	NULL,	0,	1,	NULL,	0,	0,	0,	0,	NULL,	0,	0,	NULL,	NULL,	0,	NULL,	NULL,	'ssan1988',	0,	NULL,	16869726,	'0'),
(11,	0,	0,	'17075762-9',	'$2y$10$t3pwE4BBlmUtK0ygGyOspuDtEa5ybcoFkraJLLQAw/reZzUayFxGq',	NULL,	0,	0,	0,	'DANIELA CAMILA BARRIA JARA',	'DANIELA CAMILA',	'BARRIA',	'JARA',	NULL,	'0',	NULL,	'benjamin.castillo@ARAUCANIANORTE.CL',	0,	0,	'$2y$10$t3pwE4BBlmUtK0ygGyOspuDtEa5ybcoFkraJLLQAw/r',	0,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	0,	0,	0,	NULL,	'1711391809',	'qAjy0BTf',	NULL,	NULL,	NULL,	NULL,	'',	0,	NULL,	0,	0,	NULL,	NULL,	NULL,	0,	1,	NULL,	0,	0,	0,	0,	NULL,	0,	0,	NULL,	NULL,	0,	NULL,	NULL,	'casa1988',	0,	NULL,	17075762,	'9'),
(12,	0,	0,	'14528409-0',	'$2y$10$mxxqVArcYVHdySjLPhXJcOziN5vsyTAI4GdMcD3cAF3SiAPcIDvwi',	NULL,	0,	0,	0,	'BOLIVAR  LEE OLMOS',	'BOLIVAR ',	'LEE',	'OLMOS',	NULL,	'0',	NULL,	'BOLIVARLEEO@HOTMAIL.COM',	0,	0,	'$2y$10$mxxqVArcYVHdySjLPhXJcOziN5vsyTAI4GdMcD3cAF3',	0,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	0,	0,	0,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	NULL,	0,	NULL,	0,	0,	NULL,	NULL,	NULL,	0,	1,	NULL,	0,	0,	0,	0,	NULL,	0,	0,	NULL,	NULL,	0,	NULL,	NULL,	NULL,	0,	NULL,	14528409,	'0');

CREATE TABLE ADMIN.SS_TEMPRESAS (
  ID_EMRESA               INT AUTO_INCREMENT PRIMARY KEY,  
  COD_EMPRESA             VARCHAR(5),
  NUM_RUTEMP              INT,
  COD_DVEMP               CHAR(1),
  NOM_RAZSOC              VARCHAR(40),
  NOM_DIRECC              VARCHAR(40),
  COD_COMUNA              VARCHAR(5),
  IND_CONSOLIDA           VARCHAR(2),
  IND_TIPEST              CHAR(1),
  COD_SERSAL              VARCHAR(5),
  IND_DEPMUN              CHAR(1),
  IND_URBRUR              CHAR(1),
  IND_RED                 CHAR(1),
  COD_USUARI              VARCHAR(60),
  IND_ESTADO              CHAR(1),
  FEC_AUDITA              DATE,
  COD_ESTABLRH            VARCHAR(5),
  NUM_TELEFONO            VARCHAR(20)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci;

INSERT INTO ADMIN.SS_TEMPRESAS
(`ID_EMRESA`, `COD_EMPRESA`, `NUM_RUTEMP`, `COD_DVEMP`, `NOM_RAZSOC`, `NOM_DIRECC`, `COD_COMUNA`, `IND_CONSOLIDA`, `IND_TIPEST`, `COD_SERSAL`, `IND_DEPMUN`, `IND_URBRUR`, `IND_RED`, `COD_USUARI`, `IND_ESTADO`, `FEC_AUDITA`, `COD_ESTABLRH`, `NUM_TELEFONO`) VALUES
(1, '029',  NULL, NULL, 'HOME', NULL, NULL, NULL, NULL, '029',  NULL, NULL, NULL, NULL, 'V',  NULL, NULL, NULL),
(2, '800',  NULL, NULL, 'DIALISIS BAYO DIAL', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'V',  NULL, NULL, NULL),
(3, '801',  NULL, NULL, 'ANATOMIA PATOLOGIA', NULL, NULL, NULL, '', '029',  NULL, NULL, NULL, NULL, 'V',  NULL, NULL, NULL); 

CREATE TABLE ADMIN.GU_TUSUXEMPRESA (
  ID_UXE INT AUTO_INCREMENT PRIMARY KEY,  
  ID_UID INT(10),
  COD_ESTABL VARCHAR(5),
  IND_ESTADO INT(1)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 

INSERT INTO ADMIN.GU_TUSUXEMPRESA (`ID_UXE`, `ID_UID`, `COD_ESTABL`, `IND_ESTADO`) VALUES
  (1,	10,	'029',	1),
  (2,	10,	'800',	1),
  (3,	10,	'801',	1),
  (4,	11,	'800',	1),
  (5,	12,	'801',	1),
  (6,	13,	'800',	1);

CREATE TABLE ADMIN.GU_TPERMISOS (
  PER_ID INT NOT NULL AUTO_INCREMENT,
  PER_NOMBRE VARCHAR(80),
  PER_ESTADO INT(5),
  PRIMARY KEY (PER_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 

INSERT INTO ADMIN.GU_TPERMISOS (`PER_ID`, `PER_NOMBRE`, `PER_ESTADO`) VALUES
(1,	'ADMINISTRADOR ',1),
(2,	'ROL->BDU->MAESTROPACIENTES',3),
(3,	'ROL->ANATOMIA->ADMIN',3),
(4,	'ROL->DIALISIS->ADMIN',3),
(5,	'ROL->PRESTADORES->ADMIN',3),
(6,	'ROL->ANATOMIA->NUEVASOLICITUD',3),
(7,	'ROL->ANATOMIA->RECEPCION',3); 

CREATE TABLE ADMIN.GU_TMENUPRINCIPAL (
  MENP_ID INT NOT NULL AUTO_INCREMENT,
  MENP_NOMBRE VARCHAR(100),
  MENP_ESTADO INT(5),
  MENP_RUTA VARCHAR(80),
  MENP_IDPADRE INT(5),
  MENP_TIPO INT(5),
  MENP_ORDER INT,
  MENP_FRAME INT,
  MENP_ICON VARCHAR(150),
  MENP_THEME INT(1),
  MENP_ISTOKEN INT(1),
  MENP_PARAM VARCHAR(200),
  PRIMARY KEY (MENP_ID)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 

INSERT INTO ADMIN.GU_TMENUPRINCIPAL (`MENP_ID`, `MENP_NOMBRE`, `MENP_ESTADO`, `MENP_RUTA`, `MENP_IDPADRE`, `MENP_TIPO`, `MENP_ORDER`, `MENP_FRAME`, `MENP_ICON`, `MENP_THEME`, `MENP_ISTOKEN`, `MENP_PARAM`) VALUES
(1,	'BDU PACIENTES',	1,	'app_defaul_bdu',	0,	1,	NULL,	3,	'fa fa-id-card',	1,	NULL,	NULL),
(2,	'MAESTRO DE PACIENTES ',	1,	'MAESTRODEPACIENTES',	1,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(3,	'GESTOR UNICO PACIENTES',	1,	'Ssan_bdu_creareditarpaciente',	2,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(4,	'PRESTADORES',	1,	'PRESTADORES',	0,	1,	NULL,	3,	'fa fa-user-md',	NULL,	NULL,	NULL),
(5,	'GESTIÓN DE PRESTADORES ',	1,	'GESTIONDEPRESTADORES',	4,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(6,	'AGREGA EDITA PRESTADOR ',	1,	'ssan_pres_agregaeditaprestador',	5,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(7,	'DIALISIS ',	1,	'DIALISIS',	0,	1,	NULL,	3,	'fa fa-tint',	NULL,	NULL,	NULL),
(8,	'PACIENTE DE DIALISIS',	1,	'PACIENTEDEDIALISIS',	7,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(9,	'HOJA DE TRATAMIENTO',	1,	'HOJADETRATAMIENTO',	7,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(10,	'INGRESO EGRESO PACIENTE',	1,	'ssan_hdial_ingresoegresopaciente',	8,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(11,	'HOJA DE TRATAMIENTO ENFE',	1,	'ssan_hdial_hojatratamiento',	9,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(12,	'HOJA DE TRATAMIENTO DOC',	1,	'ssan_hdial_agendadialisis',	9,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(13,	'ELIMINAR HOJA DE TRATAMIENTO',	1,	'ssan_hdial_eliminacionhojadiara',	9,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(14,	'ANATOMIA PATOLOGICA ',	1,	'ANATOMIAPATOLOGICA',	0,	1,	NULL,	3,	'fa fa-tags',	NULL,	NULL,	NULL),
(15,	'NUEVA SOLICITUD DE ANATOMIA',	1,	'NUEVASOLICITUDDEANATOMIA',	14,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(16,	'SOLICITUD ANATOMIA',	1,	'ssan_libro_biopsias_usuarioext',	15,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(18,	'RECEPCION DE SOLICITUDES',	1,	'RECEPCIONDESOLICITUDES',	14,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(19,	'GESTION DE RECEPCIÓN',	1,	'ssan_libro_biopsias_ii_fase',	18,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(20,	'PUNTO DE TOMA DE MUESTRA',	1,	'PUNTODETOMADEMUESTRA',	14,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(21,	'TOMA DE MUESTRA  ADMIN',	1,	'ssan_libro_biopsias_listaexterno1',	20,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(22,	'TOMA DE MUESTRA USUARIOS',	1,	'ssan_libro_biopsias_listaxusuarios',	20,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(23,	'PROCESAMIENTO ANATOMIA',	1,	'PROCESAMIENTOANATOMIA',	14,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(24,	'1.- SALA MACROSCOPICA',	1,	'ssan_libro_salamacroscopia',	23,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(25,	'2.- SALA PROCESO',	1,	'ssan_libro_salaproceso',	23,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(26,	'3.- SALA INCLUSIÓN',	1,	'ssan_libro_salatecnologo',	23,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(27,	'4.- RCE PATÓLOGO',	1,	'ssan_libro_etapaanalitica',	23,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(28,	'GESTION ADMINISTRATIVO',	1,	'GESTIONADMINISTRATIVO',	14,	1,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(29,	'EDICION INFORMACION BIOPSIA',	1,	'ssan_libro_edicionsolicitudbiopsia',	28,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(30,	'NOTIFICACION DE CANCER',	1,	'ssan_libro_notificacancer',	28,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(31,	'LISTADO DE CANCER',	1,	'ssan_libro_listadocancer',	28,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL),
(32,	'PERSONAL ADMINISTRATIVO',	1,	'ssan_histo_monitoriosolicitudes',	28,	2,	NULL,	3,	NULL,	NULL,	NULL,	NULL);

/*
  PRIVILEGIOS POR USUARIOS 
*/

CREATE TABLE ADMIN.GU_TUSUTIENEPER (
  ID_UTP INT AUTO_INCREMENT PRIMARY KEY,  
  PER_ID INT(5),
  ID_UID INT(10),
  IND_ESTADO INT(1)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 

INSERT INTO ADMIN.GU_TUSUTIENEPER (`ID_UTP`, `PER_ID`, `ID_UID`, `IND_ESTADO`) VALUES
(1,	1,	10,	1),
(2,	4,	11,	1),
(3,	3,	12,	1); 

/*
  PERMISOS POR MENU 
*/

CREATE TABLE ADMIN.GU_TMENPTIENEPER (
  ID_MPTP INT NOT NULL AUTO_INCREMENT,
  PER_ID INT(5) NOT NULL,
  MENP_ID INT(5) NOT NULL,
  IND_ESTADO INT(1),
  PRIMARY KEY (ID_MPTP)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci;


INSERT INTO ADMIN.GU_TMENPTIENEPER (`ID_MPTP`, `PER_ID`, `MENP_ID`, `IND_ESTADO`) VALUES
(1,	6,	16,	1),
(2,	6,	15,	1),
(3,	6,	14,	1),
(4,	7,	19,	1),
(5,	7,	18,	1),
(6,	7,	14,	1),
(7,	1,	14,	1),
(8,	1,	7,	1),
(9,	1,	4,	1),
(10,	1,	1,	1),
(11,	5,	4,	1),
(12,	4,	7,	1),
(13,	3,	14,	1); 