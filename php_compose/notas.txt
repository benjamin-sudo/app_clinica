
docker compose -f "docker-compose-desarrollo.yml" up -d --build 

docker compose up -d --build

dtrafico_https

docker logs -f oracle_slim

docker logs -f dtrafico_https

docker logs -f codeneite_3_app 

generador_certificados

user_administradorcodeneite_4_admin

sudo chmod -R 777 /home/ubuntu/app_clinica

cat /home/ubuntu/app_clinica/php_compose/php_codeneiter/html/application/config/config.php

# Listar contenedores y su tamaño
docker ps -s
# Mostrar el tamaño de las imágenes Docker
docker images
# Verificar el uso de espacio en todo Docker
docker system df
# Mostrar el uso de espacio en disco en Ubuntu
df -h
# Verificar el uso de espacio en el directorio de Docker
sudo du -sh /var/lib/docker

docker container prune -f
docker image prune -f
docker volume prune -f
docker system prune -a -f



CREATE TABLE ADMIN.GG_TGPACTE (
  ID_INGRESO              INT AUTO_INCREMENT PRIMARY KEY,  
  COD_RUTPAC              INT(10),
  COD_DIGVER              CHAR(1),
  NOM_NOMBRE              VARCHAR(25),
  NOM_APEPAT              VARCHAR(20),
  NOM_APEMAT              VARCHAR(20),
  FEC_NACIMI              DATE,
  IND_TISEXO              CHAR(1),
  IND_ESTCIV              CHAR(1),
  NOM_NPADRE              VARCHAR(31),
  NOM_NMADRE              VARCHAR(31),
  NOM_PAREJA              VARCHAR(35),
  IND_GRUCRO              CHAR(1),
  IND_TIPPAC              CHAR(1),
  COD_GRUSAN              VARCHAR(10),
  IND_ETN                 VARCHAR(2),
  OCUPACION               VARCHAR(30),
  LUGAR_TRAB              VARCHAR(30),
  NOM_DIRECC              VARCHAR(100),
  COD_COMUNA              VARCHAR(15),
  IND_URBRUR              VARCHAR(1),
  COD_PAIS                VARCHAR(3),
  COD_RUTTIT              INT(10),
  COD_USRCREA             VARCHAR(60),
  FEC_USRCREA             DATE,
  COD_USUARI              VARCHAR(60),
  FEC_AUDITA              DATE,
  IND_ESTADO              CHAR(1),
  EMAIL                   VARCHAR(65),
  IND_FAX                 VARCHAR(10),
  IND_PERCETN             VARCHAR(2),
  COD_FACSAN              VARCHAR(2),
  IND_RECNAC              VARCHAR(1),
  COD_RUTREF              INT(10),
  COD_DIGREF              VARCHAR(1),
  IND_REFER               VARCHAR(1),
  IND_RUT                 VARCHAR(10),
  NUM_FICHAE              INT,
  IND_PERCAPITA           VARCHAR(1),
  EMP_PERCAPITA           VARCHAR(3),
  ALERGIAS                VARCHAR(30),
  CREDENCIAL              VARCHAR(10),
  INTG_PART_MULT          VARCHAR(1),
  NUM_TELEFO1_2           VARCHAR(12),
  NUM_TELEFO2_2           VARCHAR(12),
  NUM_CELULAR_2           VARCHAR(12),
  NUM_TELEFO1             VARCHAR(12),
  NUM_TELEFO2             VARCHAR(12),
  NUM_CELULAR             VARCHAR(12),
  COD_SISTEMA             VARCHAR(10),
  COD_SISTEMAUDITA        VARCHAR(10),
  COD_REGION              VARCHAR(2),
  COD_CIUDAD              VARCHAR(15),
  NUM_CASA                VARCHAR(15),
  COD_VIADIRECCION        VARCHAR(2),
  IND_CONDPRAIS           VARCHAR(1),
  NOM_RESTODIRECC         VARCHAR(300),
  CP_ID_CATOCUPAPAC       INT(2) DEFAULT 0,
  IND_NIVELINSTRUC        INT(1) DEFAULT 0,
  REP_LEGAL               VARCHAR(300),
  ID_EXTRANJERO           VARCHAR(15),
  IND_TIPOIDENTIFICA      INT(1) DEFAULT 0,
  IND_EXTRANJERO          INT(1) DEFAULT 0,
  NUM_IDENTIFICACION      VARCHAR(30),
  TIP_IDENTIFICACION      INT(1),
  FEC_VENCEPASPORT        DATE,
  IND_CORTEINTERA         INT(1) DEFAULT 0,
  COD_OCUPACION           VARCHAR(5),
  ID_FONASA               VARCHAR(30),
  FEC_IDFONASA            DATE,
  NOM_SOCIAL              VARCHAR(50),
  IND_TRANS               INT(1),
  IND_SENAME              INT(1) DEFAULT 0,
  COD_NACIONALIDAD        VARCHAR(3),
  EDAD_GESTA_SEMANA       DECIMAL(5,2),
  EDAD_GESTA_DIAS         DECIMAL(5,2),
  EDAD_CORREGIDA_SEMANA   DECIMAL(5,3),
  EDAD_CORREGIDA_DIAS     DECIMAL(5,2),
  IND_PREMATURO           INT(1),
  ID_OCUPACION            INT(2),
  IND_CATOCUPANEW         INT(1),
  IND_NIVEL_EDUCACIONAL   INT,
  IND_POBLACION_MIGRANTE  INT,
  PESO                    DECIMAL(3,1),
  TALLA                   INT,
  IMC                     DECIMAL(3,1),
  EDADGESTACIONAL         INT
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE utf8mb4_spanish_ci; 


SELECT 
B.NOM_SERVIC, A.* FROM 
  ADMIN.GG_TSERVICIOXEMP A,
  ADMIN.GG_TSERVICIO B
WHERE 
  COD_EMPRESA = 100 AND A.ID_SERDEP = B.ID_SERDEP;



  
    /*
     PROCEDURE LOAD_RCE_ANATOMIA_PATOLOGICA(
            V_COD_EMPRESA                                             IN VARCHAR2,
            V_USR_SESSION                                              IN VARCHAR2,
            V_OPCION                                                        IN VARCHAR2,
            V_IND_FIRST                                                    IN VARCHAR2,
            V_ID_ANATOMIA                                               IN VARCHAR2,
            V_GET_SALA                                                     IN VARCHAR2,
            P_ANATOMIA_PATOLOGICA_MAIN                       OUT SYS_REFCURSOR,
            P_ANATOMIA_PATOLOGICA_MUESTRAS              OUT SYS_REFCURSOR,
            P_AP_MUESTRAS_CITOLOGIA                             OUT SYS_REFCURSOR,
            P_AP_INFORMACION_ADICIONAL                         OUT SYS_REFCURSOR,
            P_INFO_LOG_ADVERSOS                                    OUT SYS_REFCURSOR,
            P_LISTA_PATOLOGOS                                        OUT SYS_REFCURSOR,
            P_LISTA_FRAGMENTOS                                      OUT SYS_REFCURSOR,
            P_LISTA_PRESTACIONES                                    OUT SYS_REFCURSOR,
            P_LIS_CODORGANO                                           OUT SYS_REFCURSOR,
            P_LIS_CODPATOLOGIA                                      OUT SYS_REFCURSOR,
            P_LIS_COD_MAI                                               OUT SYS_REFCURSOR,
            P_LIS_MAI_PROCEDIMIENTO                             OUT SYS_REFCURSOR,
            C_HISTORIAL_M                                               OUT SYS_REFCURSOR,
            C_CHAT_ANATOMIA                                          OUT SYS_REFCURSOR,
            C_IMAGENES_BLOB                                           OUT SYS_REFCURSOR,
            C_IMAGENES_BLOB_MUESTRAS                         OUT SYS_REFCURSOR,
            P_TECNICAS_APLICADAS                                   OUT SYS_REFCURSOR,
            P_TECNICAS_APLICADASXMUESTRA                  OUT SYS_REFCURSOR,
            P_SALA_PROCESO                                           OUT SYS_REFCURSOR,
            C_STATUS                                                       OUT SYS_REFCURSOR,
             C_EXCEPCION                                                  OUT SYS_REFCURSOR
        )  IS 
        
        --DATA SALA DE PROCESO
        VAL_HISTO_ZONA  NUMBER := 0;
        V_STAR_SALA_PROCESO DATE := NULL;
        V_END_SALA_PROCESO DATE := NULL;
        
        BEGIN 
        
        
              IF V_GET_SALA = 'sala_proceso' THEN 
              
                   SELECT 
                        P.ID_HISTO_ZONA,
                        P.DATE_STAR_SALA_PROCESO,
                        P.DATE_END_SALA_PROCESO
                  INTO 
                        VAL_HISTO_ZONA,
                        V_STAR_SALA_PROCESO,
                        V_END_SALA_PROCESO
                  FROM 
                        PABELLON.PB_SOLICITUD_HISTO P 
                  WHERE 
                    P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA);
                    
                    IF VAL_HISTO_ZONA = 5 THEN
                        OPEN P_SALA_PROCESO FOR 
                        SELECT 
                        TO_CHAR(V_STAR_SALA_PROCESO,'DD-MM-YYYY')           AS  TIME_DIA,
                        TO_CHAR(V_STAR_SALA_PROCESO,'hh24:mi')                  AS  TIME_HORA,
                        TO_CHAR(SYSDATE,'DD-MM-YYYY')                                   AS  TIME_DIA_FINAL,
                        TO_CHAR(SYSDATE,'hh24:mi')                                          AS  TIME_HORA_FINAL,
                        VAL_HISTO_ZONA                                                            AS  VAL_HISTO_ZONA
                        FROM SYS.DUAL;
                    ELSE 
                        OPEN P_SALA_PROCESO FOR 
                        SELECT 
                        TO_CHAR(SYSDATE,'DD-MM-YYYY')                                   AS  TIME_DIA,
                        TO_CHAR(SYSDATE,'hh24:mi')                                          AS  TIME_HORA,
                        TO_CHAR(SYSDATE,'DD-MM-YYYY')                                   AS  TIME_DIA_FINAL,
                        TO_CHAR(SYSDATE,'hh24:mi')                                          AS  TIME_HORA_FINAL,
                        VAL_HISTO_ZONA                                                            AS  VAL_HISTO_ZONA
                        FROM SYS.DUAL;
                    END IF;
              
            END IF ;
            
            IF V_GET_SALA = 'sala_tecnologo' THEN 
                OPEN P_TECNICAS_APLICADAS                                                                   FOR    
                SELECT 
                ''                                                                                                              AS SELECTED,
                P.ID_TECNICA_AP                                                                                      AS ID_TECNICA_AP, 
                P.TXT_TECNICA_AP                                                                                   AS TXT_TECNICA_AP, 
                P.IND_ESTADO
                FROM PABELLON.PB_TECNICASXMUESTRAS P
                WHERE
                P.IND_ESTADO IN (1);
                
                OPEN P_TECNICAS_APLICADASXMUESTRA                                                                   FOR    
                SELECT 
                    P.ID_TECNICAXMUES, 
                    P.ID_TECNICA_AP, 
                    P.ID_NMUESTRA, 
                    P.DATE_CREA, 
                    P.USR_CREA, 
                    P.IND_ESTADO, 
                    P.ID_SOLICITUD_HISTO, 
                    P.DATE_AUDITA, 
                    P.USR_AUDITA
                FROM 
                    PABELLON.PB_MUESTRAXTECNICA P
                WHERE
                    P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA) AND  P.IND_ESTADO IN (1);
            END IF;
            
       
            -------------------------------------
            --MENSAJES DEL WEBSOCKET--
            -- CHAT --
            -------------------------------------
            OPEN C_CHAT_ANATOMIA FOR  
            SELECT 
                P.ID_TCHATANATOMIA, 
                G.FIRST_NAME||' '||G.MIDDLE_NAME||' '||G.LAST_NAME                     AS TXT_USER,
                P.DATE_CREA, 
                P.USR_CREA, 
                P.IND_ESTADO, 
                P.TXT_CHAT_ANATOMIA, 
                TO_CHAR(P.DATE_CREA,'DD-MM-YYYY hh24:mi')                                  AS CHAR_DATE_CREA,  
                P.ID_SOLICITUD_HISTO, 
                P.ID_UID
            FROM 
                PABELLON.PB_TCHATANATOMIA       P,
                GUADMIN.FE_USERS                        G
            WHERE 
                P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA) 
                AND
                G.ID_UID = P.ID_UID
                AND
                P.IND_ESTADO IN (1)
            ORDER BY P.DATE_CREA;
            
            
            --GESTOR DE IMAGES  MAIN
            OPEN C_IMAGENES_BLOB FOR  
            SELECT
                I.ID_MAIN                                                                                          AS ID_UNICO_IMAGEN, 
                I.ID_SOLICITUD_HISTO, 
                I.COD_EMPRESA, 
                I.SIZE_BLG, 
                I.CONTEXT_TYPE, 
                I.MAIN_BLOB, 
                I.IND_ESTADO, 
                I.IMG_DATA, 
                I.NAME_IMG, 
                I.TXT_OBSERVACIONES, 
                I.ID_UID,
                I.USR_CREA,
                I.DATE_CREA,
                I.BFILE, 
                I.NCLOB,
                I.ID_HISTO_ZONA
            FROM  
                PABELLON.PB_MAIN_BLG_ANATOMIA I
            WHERE 
                I.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA) 
            AND 
                I.IND_ESTADO IN (1) 
            ORDER BY 
                I.DATE_CREA;
            
            
            --GESTOR DE IMAGES X MUESTRAS
            /*
            OPEN C_IMAGENES_BLOB_MUESTRAS FOR  
            SELECT
                I.ID_MAIN AS ID_IMAGEN, 
                I.ID_SOLICITUD_HISTO, 
                I.COD_EMPRESA, 
                I.SIZE_BLG, 
                I.CONTEXT_TYPE, 
                I.MAIN_BLOB, 
                I.IND_ESTADO, 
                I.IMG_DATA, 
                I.NAME_IMG, 
                I.TXT_OBSERVACIONES, 
                I.ID_UID,
                I.USR_CREA,
                I.DATE_CREA,
                I.BFILE, 
                I.NCLOB,
                I.ID_HISTO_ZONA
            FROM  
                PABELLON.PB_MAIN_BLG_ANATOMIA I
            WHERE 
                I.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA) AND 
                I.IND_ESTADO IN (1) 
            ORDER BY I.DATE_CREA;
            */
            
            IF V_GET_SALA = 'analitica' THEN 
             
            --BUSQUEDA CODIFICACIÓN FONASA
           OPEN P_LIS_COD_MAI FOR 
           SELECT 
               CASE WHEN  A.COD_PRESTACION IS NULL OR  A.IND_ESTADO IN (0) THEN '' ELSE 'selected'  END  AS SELECTED,
               PR.COD_PRESTACION, 
               PR.NOM_PRESTACION, 
               PR.FAMILIA_INTERVENCION, 
               PR.NOM_CORTOS 
           FROM 
               ADMIN.GG_TPRESTACION                                    PR,
               PABELLON.PB_TPRESTACIONXANATOMIA              A
           WHERE 
               PR.IND_ESTADO IN ('V') 
           AND
               A.COD_PRESTACION(+)  = PR.COD_PRESTACION 
           AND
               A.ID_SOLICITUD_HISTO(+) IN (V_ID_ANATOMIA) 
           ORDER 
               BY PR.NOM_PRESTACION;
           
           --BUSQUEDA DE PRESTACIÓNES
           OPEN P_LISTA_PRESTACIONES                                                           FOR  
           SELECT  
               G.COD_PRESTA,
               CASE WHEN  A.COD_PRESTA IS NULL OR  A.IND_ESTADO IN (0) THEN '' ELSE 'selected'  END  AS SELECTED,
               G.NOM_CORTOS, 
               G.NOM_LARGOS, 
               G.IND_TIPRES, 
               G.COD_ITEPRES, 
               G.VAL_BENEFI, 
               G.VAL_PARTIC, 
               G.VAL_ACCAUT, 
               G.VAL_LIBELE, 
               G.IND_ESTADO, 
               G.FEC_AUDITA, 
               G.COD_USUARI, 
               G.IND_URGEN, 
               G.COD_EMPRESA, 
               G.IND_OCUPA, 
               G.IND_PABE
           FROM  
               ADMIN.GG_TPRESTA G,
               PABELLON.PB_TPRESTAXANATOMIA A
           WHERE  
               G.COD_EMPRESA IN (V_COD_EMPRESA)  
           --AND
           
              --  A.COD_PRESTA IN ('0801001','0801002','0801003','0801004','0801005','0801006','0801007','0801008','0801009','0801010','0801011','0801012','0801012')
               
           AND 
               G.IND_TIPRES IN ('P')
           AND
               G.COD_PRESTA = A.COD_PRESTA(+)
           AND
               A.ID_SOLICITUD_HISTO(+) IN (V_ID_ANATOMIA) 
           ORDER BY G.NOM_LARGOS;
           
          --BD DE PRESTACIONES
           OPEN P_LIS_CODORGANO FOR  
               SELECT 
               CASE WHEN  A.ID_ORGANO_AP IS NULL OR  A.IND_ESTADO IN (0) THEN '' ELSE 'selected'  END  AS SELECTED,  
               P.ID_ORGANO_AP, 
               P.COD_ORGANO, 
               P.TXT_NOMBRE_ORGANO 
           FROM 
               PABELLON.PB_ORGANO_ANATOMIA P,
               PABELLON.PB_TORGANOXANATOMIA A
           WHERE
               A.ID_ORGANO_AP(+) = P.ID_ORGANO_AP
           AND
               A.ID_SOLICITUD_HISTO(+) IN (V_ID_ANATOMIA) 
           ORDER BY P.TXT_NOMBRE_ORGANO;
   
           --P_LIS_CODPATOLOGIA
           OPEN P_LIS_CODPATOLOGIA FOR  
           SELECT 
               CASE WHEN  A.ID_PATOLOGIA_AP IS NULL OR  A.IND_ESTADO IN (0) THEN '' ELSE 'selected'  END  AS SELECTED,  
               P.ID_PATOLOGIA_AP, 
               P.COD_PATOLOGIA, 
               P.TXT_PATOLOGIA 
           FROM 
               PABELLON.PB_PATOLOGIA_ANATOMIA P,
               PABELLON.PB_TPATOLOGIAXANATOMIA A
           WHERE
               A.ID_PATOLOGIA_AP(+) = P.ID_PATOLOGIA_AP
           AND
               A.ID_SOLICITUD_HISTO(+) IN (V_ID_ANATOMIA) 
           ORDER BY P.TXT_PATOLOGIA;
           
     END IF;
   
       --********************************
       --FORMULARIO PRINCIPAL DE RCE ANATOMIA
       --********************************
       OPEN P_ANATOMIA_PATOLOGICA_MAIN                                              FOR  
       SELECT 
       P.IND_TIPO_PROCESO                                                                        AS IND_TIPO_PROCESO,
       P.IND_CONF_CANCER                                                                         AS IND_CONF_CANCER,
       P.NUM_NOF_CANCER                                                                          AS NUM_NOF_CANCER,
       P.IND_CONF_PAG                                                                               AS IND_CONF_PAG, 
       P.ID_PROFESIONAL_CITOLOGICO                                                        AS ID_PROFESIONAL_CITOLOGICO,
       P.TXT_DIAG_CITOLOGIA                                                                     AS TXT_DIAG_CITOLOGICO2,
       P.TXT_DIAG_CITOLOGIA                                                                     AS TXT_DIAG_CITOLOGICO,
       P.TXT_CITOLOGICO                                                                            AS TXT_CITOLOGICO,
       P.IND_CONF_CANCER                                                                         AS IND_CONF_CANCER,
       P.IND_TEC_INCLUCION                                                                       AS IND_TEC_INCLUCION,
       P.IND_TEC_CORTE                                                                             AS IND_TEC_CORTE,
       P.IND_TEC_TINCION                                                                           AS IND_TEC_TINCION,
       NVL (P.NUM_INTERNO_AP,0)                                                              AS NUM_INTERNO_AP,
       P.NUM_CO_CITOLOGIA                                                                      AS NUM_CO_CITOLOGIA ,
       P.NUM_CO_PAP                                                                                 AS NUM_CO_PAP,
       P.NUM_TACOS_CORTADOS                                                                AS NUM_TACOS_CORTADOS,
       P.NUM_EXTENDIDOS                                                                          AS NUM_EXTENDIDOS,
       P.NUM_AZUK_ALCIAN_S                                                                      AS NUM_AZUK_ALCIAN_S,
       P.NUM_PAS_SERIADA                                                                         AS NUM_PAS_SERIADA,
       P.NUM_DIFF_SERIADA                                                                        AS NUM_DIFF_SERIADA,
       P.NUM_HE_SERIADA                                                                           AS NUM_HE_SERIADA,
       P.NUM_LAMINAS_SERIADAS                                                                AS NUM_LAMINAS_SERIADAS,
       P.NUM_HE_RAPIDA                                                                             AS NUM_HE_RAPIDA,
       P.NUM_FRAGMENTOS                                                                         AS NUM_FRAGMENTOS,
       P.IND_ESTADO_OLGA                                                                         AS IND_ESTADO_OLGA,
       P.NUM_CP_INTERCONSULTA                                                               AS NUM_CP_INTERCONSULTA,
       TO_CHAR(P.DATE_INTERCONSULTA,'DD-MM-YYYY')                              AS DATE_INTERCONSULTA,
       P.NUM_DIAS_ENTCANCER                                                                    AS NUM_DIAS_ENTCANCER,
       P.NUM_ASIGNACION96HRS                                                                  AS  NUM_ASIGNACION96HRS,
       TO_CHAR(P.DATE_INICIO_CANCER,'DD-MM-YYYY')                                AS  DATE_FECHA_REALIZACION2,
       TO_CHAR(P.DATE_FINAL_CANCER,'DD-MM-YYYY')                                 AS  DATE_FECHA_REALIZACION3,
       TO_CHAR(P.DATE_INICIO_CANCER,'hh24:mi')                                      AS  DATE_FECHA_REALIZACION21,
       TO_CHAR(P.DATE_FINAL_CANCER,'hh24:mi')                                       AS  DATE_FECHA_REALIZACION32,
       P.IND_ESTADIO_OLGA                                                                        AS IND_ESTADIO_OLGA,
       P.IND_ESTADO_OLGA                                                                         AS IND_ESTADIO_OLGA_TEC,
       P.TXT_DIADNOSTICO_AP                                                                    AS TXT_DIADNOSTICO_AP,
       TO_DATE(P.DATE_FECHA_MACRO,'DD/MM/YYYY')                                 AS FECHA_FECHA_MACRO,
       TO_DATE(P.DATE_FECHA_CORTE,'DD/MM/YYYY')                                 AS FECHA_FECHA_CORTE,
       P.IND_COLOR_TACO                                                                          AS IND_COLOR_TACO,
       (
           TO_DATE(P.DATE_ENTREGA_INFORME,'DD/MM/YYYY hh24:mi') 
           - 
           TO_DATE(P.FEC_USRCREA_RECEP,'DD/MM/YYYY hh24:mi')
       )                                                                                                                                                                  AS N_DIAS_ENTREGA_INFORME,
       CASE
           WHEN  (
                           TO_DATE(P.DATE_ENTREGA_INFORME,'DD/MM/YYYY hh24:mi') 
                           - 
                           TO_DATE(P.FEC_USRCREA_RECEP,'DD/MM/YYYY hh24:mi')
                       ) < 8
           THEN   'CUMPLE' ELSE  'NO CUMPLE'
       END                                                                                                                                                             AS TXT_ENTREGA_CUMPLE,
       TO_CHAR(P.DATE_IMPRESION_INFORME,'DD-MM-YYYY hh24:mi')                                                                      AS DATE_IMPRESION_INFORME,
       TO_CHAR(P.DATE_ENTREGA_INFORME,'DD-MM-YYYY')                                                                                    AS DATE_FECHA_ENTREGA_INFORME,
       TO_CHAR(P.DATE_ENTREGA_INFORME,'hh24:mi')                                                                                           AS DATE_HORA_ENTREGA_INFORME,
       P.ID_PROFESIONAL_ENTREGA_INFO                                                                                                               AS ID_PROFESIONAL_ENTREGA_INFO,
       P.ID_PROFESIONAL_RECIBE_INFO                                                                                                                  AS ID_PROFESIONAL_RECIBE_INFO,
       P.IND_MES_CRITICO                                                                                                                                     AS IND_MES_CRITICO,
       P.NUM_BENEFICIARIOS                                                                                                                                 AS NUM_BENEFICIARIOS,
       P.ID_PROFESIONAL                                                                                                                                       AS ID_PROFESIONAL,
       TO_CHAR(P.DATE_CHEQUEO_SOME,'DD-MM-YYYY hh24:mi')                                                                           AS DATE_CHEQUEO_SOME,
       TO_CHAR(P.DATE_REVISION_BD,'DD-MM-YYYY hh24:mi')                                                                                AS DATE_REVISION_BD,
       TO_CHAR(P.DATE_REVISION_INFORME,'DD-MM-YYYY hh24:mi')                                                                       AS DATE_REVISION_INFORME,
       TO_CHAR(P.DATE_ARCHIVADA_EN_FICHA,'DD-MM-YYYY')                                                                               AS DATE_ARCHIVADA_EN_FICHA,
       P.NUM_NOTIFICACION                                                                                                                                  AS NUM_NOTIFICACION,
       ------------------------------------------------------------------------------------------------------------------------------------------------------
       --INFORMACION DEL PACIENTE
       TO_CHAR(SYSDATE,'DD-MM-YYYY hh24:mi')                                                                                                  AS FEC_EMISION,
       L.COD_RUTPAC || '-' || L.COD_DIGVER                                                                                                         AS RUTPACIENTE,
       L.IND_TISEXO                                                                                                                                             AS IND_TISEXO,
       L.COD_RUTPAC                                                                                                                                           AS COD_RUTPAC,
       TRUNC (MONTHS_BETWEEN (SYSDATE, L.FEC_NACIMI) / 12)                                                                         AS NUMEDAD,
       TO_CHAR(L.FEC_NACIMI,  'DD-MM-YYYY')                                                                                                     AS NACIMIENTO,
       TRUNC(MONTHS_BETWEEN(SYSDATE,L.FEC_NACIMI)/12)                                                                              AS EDAD,
       UPPER (L.NOM_NOMBRE) || ' ' || UPPER (L.NOM_APEPAT)|| ' '|| UPPER (L.NOM_APEMAT)                                AS NOMBRE_COMPLETO,
       SUBSTR (L.NOM_NOMBRE, 1, 1)|| '.'|| UPPER (L.NOM_APEPAT)  || ' '  || UPPER (L.NOM_APEMAT)                    AS TXTNOMCIRUSMALL,
       UPPER (L.NOM_NOMBRE)|| ' '|| UPPER (L.NOM_APEPAT)|| ' '|| UPPER (SUBSTR (L.NOM_APEMAT, 1, 1))           AS TXTPRIMERNOMBREAPELLIDO,
       -----------------------
       --- FICHA LOCAL ---
       ----------------------
       CASE
           WHEN P.COD_EMPRESA = 1000
           THEN
               (SELECT E.NUM_NFICHA
               FROM ADMIN.SO_TCPACTE E
               WHERE E.NUM_FICHAE = P.NUM_FICHAE AND E.COD_EMPRESA = 100)
           ELSE
               (SELECT E.NUM_NFICHA
               FROM ADMIN.SO_TCPACTE E
               WHERE 
               E.NUM_FICHAE = P.NUM_FICHAE
               AND 
               E.COD_EMPRESA = P.COD_EMPRESA)
       END                                                                                                                 AS FICHAL,
           (
                   SELECT
                             A.NOM_PREVIS
                   FROM
                           ADMIN.GG_TDATPREV     A,
                           ADMIN.SO_TTITUL       B,
                           ADMIN.GG_TGPACTE      C,
                           ADMIN.GG_TINSEMP      D
                   WHERE
                           A.IND_PREVIS    = B.IND_PREVIS
                   AND
                           B.COD_RUTTIT    = C.COD_RUTTIT
                   AND  
                           B.NUM_RUTINS    = D.COD_RUTINS
                   AND
                           C.NUM_FICHAE    = P.NUM_FICHAE
                   AND
                           A.IND_ESTADO    = 'V' 
           )                                                                                                                   AS TXT_PREVISION,
           ----------------------------------------- PROFESIONAL -----------------------------------------------------------------
           UPPER (G.NOM_NOMBRE||' '|| G.NOM_APEPAT ||' '|| G.NOM_APEMAT)             AS PROFESIONAL,
           G.NOM_APEPAT||' '|| G.NOM_APEMAT ||' '|| G.NOM_NOMBRE                          AS PROFESIONAL_2,
           G.COD_RUTPRO||'-'|| G.COD_DIGVER                                                              AS RUT_PROFESIOAL,    
           G.COD_RUTPRO                                                                                             AS ID,
           G.COD_DIGVER                                                                                               AS DV,
           G.COD_TPROFE                                                                                              AS MEDI,
           ----------------------------------------- PROFESIONAL -----------------------------------------------------------------
           TO_CHAR(P.DATE_INICIOREGISTRO, 'DD-MM-YYYY hh24:mi')                            AS FECHA_SOLICITUD,
           P.PA_ID_PROCARCH                                                                                        AS PA_ID_PROCARCH,
          CASE
               WHEN P.PA_ID_PROCARCH = '31' THEN
                  -- 'PABELLON CENTRAL'
                   (   
                   SELECT 
                       DECODE (SALA.IND_ZONA_PABELLON,'1','PABELLÓN CENTRAL','2','PABELLÓN CIRUGIA MENOR','3','MATERNIDAD','4','SALA LASER','NO DETERMINADO')  AS NAME
                   FROM 
                       PABELLON.PB_TABLAOPERATORIA PA ,  
                       PABELLON.PB_SALA_PABELLON SALA 
                   WHERE 
                       PA.ID_TABLA IN (P.ID_TABLA) AND 
                       PA.COD_PABELLON = SALA.COD_PABELLON  
                    )
                   
               WHEN P.PA_ID_PROCARCH = '63' THEN
                   'RCE ESPECIALIDADES'      
               WHEN P.PA_ID_PROCARCH = '65' THEN
                   'MODULO ANATOMIA'
               ELSE
                   'NO INFORMADO'
           END  AS TXT_PROCEDENCIA,
           P.PA_ID_PROCARCH                                                                               AS PA_ID_PROCARCH,
           DECODE(P.PA_ID_PROCARCH,'31','SI','NO')                                             AS TXT_PIEZA_QUIRUGICA,
           P.IND_NOTIF_CANCER                                                                              AS IND_NOTIF_CANCER,
           DECODE(P.IND_NOTIF_CANCER,'1','SI','NO')                                             AS TXT_NOTIF_CANCER,
           P.ID_SERDEP                                                                                         AS ID_SERVICIO,
            (SELECT 
              S.NOM_SERVIC
           FROM 
               ADMIN.GG_TSERVICIOXEMP T, 
               ADMIN.GG_TSERVICIO S
           WHERE     
                       T.ID_SERDEP = P.ID_SERDEP
                AND T.COD_EMPRESA = P.COD_EMPRESA
                AND S.ID_SERDEP = T.ID_SERDEP)                                                     AS  NOMBRE_SERVICIO,
           ---------------------------- ID UNICO ANATOMIA  --------------------------------
           P.ID_SOLICITUD_HISTO                                                                          AS ID_SOLICITUD, 
           P.TXT_DIAGNOSTICO                                                                             AS TXT_DIAGNOSTICO,
           TO_CHAR(SYSDATE,'DD-MM-YYYY hh24:mi')                                            AS FEC_EMISION,
           TO_CHAR(P.FEC_USRCREA, 'DD-MM-YYYY hh24:mi')                                 AS FECHA_SOLICITUD,
           TO_CHAR(P.DATE_INICIOREGISTRO,'DD-MM-YYYY hh24:mi')                     AS FECHA_TOMA_MUESTRA,
           ------------------------------- TIPO DE BIOPSIA -----------------------------------     
           DECODE(P.IND_TIPO_BIOPSIA,
               '1','SI',
               '2','CONTEMPORANEA',
               '3','DIFERIDA',
               '4','BIOPSIA + CITOLOGÍA',
               '6','CITOLOGÍA PAP',
               '5','SOLO CITOLOGÍA','NO INFORMADO'
            )                                                                                                          AS TIPO_DE_BIOPSIA, 
            P.IND_TIPO_BIOPSIA                                                                             AS IND_TIPO_BIOPSIA,
            ------------------------------- TIPO DE BIOPSIA -----------------------------------     
           DECODE(P.IND_ESTADO,
                       '1','SOLICITUD ACTIVA',
                       '0','SOLICITUD DESHABILITADA',
                       'NO INFORMADA')                                                                       AS TXT_ESTADO, 
            ------------------------------------------------------------------------------------
           --MAIN DE MUESTRA --           
           P.DES_SITIOEXT, 
           P.DES_UBICACION, 
           P.DES_TAMANNO, 
           DECODE(P.ID_TIPO_LESION,
           '1','LIQUIDO',
           '2','ORGANO',
           '3','TEJIDO','NO INFORMADO')                                                                 AS TXT_TIPOSESION, 
           DECODE(P.ID_ASPECTO,
           '1','INFLAMATORIA',
           '2','BENIGNA',
           '3','NEOPLASICA','NO INFORMADO')                                                         AS TXT_ASPECTO,
           DECODE(P.ID_ANT_PREVIOS,
           '1','NO', 
           '2','BIOPSIA ', 
           '3','CITOLOGIA','NO INFORMADO')                                                            AS TXT_ANT_PREVIOS,
           P.ID_ANT_PREVIOS,
           P.NUM_ANTECEDENTES, 
           P.DES_BIPSIA,
           P.DES_CITOLOGIA, 
           P.DES_OBSERVACIONES,                               
           --------------------------------------------------------------------------------------
          P.NUM_FICHAE, 
          P.COD_USRCREA, 
          P.FEC_USRCREA, 
          P.COD_EMPRESA, 
          P.DES_SITIOEXT, 
          P.DES_UBICACION, 
          P.DES_TAMANNO, 
          P.ID_TIPO_LESION, 
          P.ID_ASPECTO, 
          P.ID_ANT_PREVIOS, 
          P.NUM_ANTECEDENTES, 
          P.DES_BIPSIA, 
          P.DES_CITOLOGIA, 
          P.DES_OBSERVACIONES, 
          P.IND_ESTADO, 
          P.FEC_REVISION, 
          P.ID_TABLA, 
          P.DES_TIPOMUESTRA, 
          P.NUM_SUBNUMERACION, 
          P.COD_USRCREA_TO_MUE, 
          P.FEC_USRCREA_TO_MUE, 
          P.COD_USRCREA_ENV, 
          P.FEC_USRCREA_ENV, 
          P.COD_USRCREA_RECEP, 
          P.FEC_USRCREA_RECEP, 
          P.COD_EMPRESA_RECEP, 
          P.COD_USRCREA_INFORMADA, 
          P.FEC_USRCREA_INFORMADA, 
          P.COD_EMPRESA_INFORMADA, 
          P.ID_ARCHIVO_SUBIDO, 
          P.COD_USRCREA_RECH,
          P.FEC_USRCREA_RECH, 
          P.COD_EMPRESA_RECH, 
          P.TIPO_RECHAZO, 
          P.OBS_RECHAZO, 
          P.ID_HISTO_ESTADO, 
          P.AD_ID_ADMISION, 
          P.ID_SERDEP, 
          P.IND_TIPO_BIOPSIA, 
          P.IND_TEMPLATE, 
          P.DATE_INICIOREGISTRO, 
          P.COD_RUTPRO,
          P.TXT_DIAGNOSTICO,
          P.NUM_PLANTILLA,
          P.IND_USOCASSETTE,
          P.ID_ROTULADO,
          R.TXT_OBSERVACION AS TXT_ROTULO,
          P.ID_HISTO_ESTADO,
           DECODE(P.ID_HISTO_ESTADO, 
           '1','NUEVA SOLICITUD',
           '2','EN CUSTODIA',
           '3','EN TRASPORTE',
           '4','RECEPCIONADA',
           '5','RECHAZADA', 
           'NO INFORMADO')                                                                          AS TXT_HISTO_ESTADO,
           P.IND_ESTADO_MUESTRAS                                                             AS IND_ESTADO_MUESTRAS,
           P.TXT_DESC_MACROSCOPICA                                                         AS TXT_DESC_MACROSCOPICA
     FROM  
           ADMIN.GG_TGPACTE                            L,
           ADMIN.GG_TPROFESIONAL                   G,
           PABELLON.PB_SOLICITUD_HISTO          P,
           PABELLON.PB_INFOROTULADO              R
     WHERE
           P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA)
           AND
            P.ID_ROTULADO              =  R.ID_ROTULADO
           AND
           P.NUM_FICHAE                 =  L.NUM_FICHAE
           AND
           P.COD_RUTPRO                = G.COD_RUTPRO
           AND
           P.IND_ESTADO                  IN  (1)
           ORDER BY 
           P.DATE_INICIOREGISTRO;
       
       --------------
       --LOAD RCE
       --------------
       OPEN P_ANATOMIA_PATOLOGICA_MUESTRAS FOR
       SELECT 
       '0' AS TOTAL_MUESTRAS,
       CASE V_COD_EMPRESA
       WHEN '100' THEN 'H.MAURICIO HEYERMANN T.ANGOL'
       WHEN '106' THEN 'SAN JOSE DE VICTORIA' 
       WHEN '029' THEN 'SERVICIO DE SALUD ARAUCANIA NORTE'
       WHEN '1000' THEN 'HOSPITAL MILITAR'
       ELSE 'SERVICIO DE SALUD ARAUCANIA NORTE'
       END                                                                                                      AS TXT_HOSPITAL_ETI,
       M.IND_ESTADO_CU,
       M.ID_NUM_CARGA,
       NULL                                                                                                     AS ID_TABLA,
       M.IND_ESTADO                                                                                      AS ESTADO,
       M.ID_NMUESTRA                                                                                   AS ID_NMUESTRA,
       M.N_MUESTRA                                                                                      AS N_MUESTRA,
       UPPER(M.TXT_MUESTRA)                                                                      AS TXT_MUESTRA,
       M.IND_ESTADO_REG                                                                              AS IND_ESTADO_REG,
       M.IND_TIPOMUESTRA                                                                            AS IND_TIPOMUESTRA, 
       CASE
       WHEN M.NUM_CASSETTE IS NULL THEN  0  ELSE  M.NUM_CASSETTE
       END                                                                                                      AS NUM_CASSETTE,
       M.ID_CASETE                                                                                        AS ID_CASETE,
       CASE
       WHEN M.NUM_ML IS NULL THEN  0  ELSE  M.NUM_ML
       END                                                                                                      AS NUM_ML,
       DECODE(M.IND_ETIQUETA,
       '1','PEQUEÑO',
       '2','MEDIANO',
       'NO INFORMADO')                                                                                 AS TXT_ETIQUETA,
       --M.IND_ETIQUETA                                                                                AS IND_ETIQUETA          
       CASE
           WHEN M.IND_ETIQUETA IS NULL THEN  2  ELSE   M.IND_ETIQUETA   
       END                                                                                                   AS IND_ETIQUETA,
       
       NVL(M.TXT_DESC_MACROSCOPICA,NULL)                                            AS IND_DESC_MACROSCOPICA,
       M.TXT_DESC_MACROSCOPICA                                                            AS TXT_DESC_MACROSCOPICA,
       M.TXT_DESC_MICROSCOPICA                                                             AS TXT_DESC_MICROSCOPICA,
      
       IMG_MACRO.NAME_IMG                                                                     AS NAME_IMG, 
       IMG_MACRO.IMG_DATA                                                                     AS IMG_DATA,   
       IMG_MACRO.ID_MAIN                                                                        AS ID_IMAGEN
           
       FROM 
           PABELLON.PB_HISTO_NMUESTRAS         M,
           PABELLON.PB_IMG_APMUESTRAS           IMG_MACRO
       WHERE
           M.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA)     
           AND 
           M.ID_NMUESTRA = IMG_MACRO.ID_NMUESTRA (+) 
           AND
           IMG_MACRO.IND_ESTADO(+) IN (1)
           AND 
           M.IND_TIPOMUESTRA = 1
           AND 
           M.IND_ESTADO = 1
           ORDER BY 
           M.N_MUESTRA;
       
       
       --***************************************************************************
       OPEN P_AP_MUESTRAS_CITOLOGIA FOR 
       SELECT 
           '0' AS TOTAL_MUESTRAS,
           CASE V_COD_EMPRESA
           WHEN '100' THEN 'H.MAURICIO HEYERMANN T.ANGOL'
           WHEN '106' THEN 'SAN JOSE DE VICTORIA' 
           WHEN '029' THEN 'SERVICIO DE SALUD ARAUCANIA NORTE'
           WHEN '1000' THEN 'HOSPITAL MILITAR'
           ELSE 'SERVICIO DE SALUD ARAUCANIA NORTE'
           END                                                                                                      AS TXT_HOSPITAL_ETI,
           M.IND_ESTADO_CU,
           M.ID_NUM_CARGA,
           NULL                                                                                                     AS ID_TABLA,
           M.IND_ESTADO                                                                                      AS ESTADO,
           M.ID_NMUESTRA                                                                                   AS ID_NMUESTRA,
           M.N_MUESTRA                                                                                      AS N_MUESTRA,
           UPPER(M.TXT_MUESTRA)                                                                       AS TXT_MUESTRA,
           M.IND_ESTADO_REG                                                                              AS IND_ESTADO_REG,
           M.IND_TIPOMUESTRA                                                                            AS IND_TIPOMUESTRA, 
           CASE
           WHEN M.NUM_CASSETTE IS NULL THEN  0  ELSE  M.NUM_CASSETTE
           END                                                                                                      AS NUM_CASSETTE,
           --M.NUM_ML                                                                                          AS NUM_ML,
           CASE
           WHEN M.NUM_ML IS NULL THEN  0  ELSE  M.NUM_ML
           END                                                                                                      AS NUM_ML,
           --M.IND_ETIQUETA                    AS IND_ETIQUETA 
           DECODE(M.IND_ETIQUETA,
           '1','PEQUEÑO',
           '2','MEDIANO',
           'NO INFORMADO')                                                                               AS TXT_ETIQUETA,
           CASE
               WHEN M.IND_ETIQUETA IS NULL THEN  2  ELSE   M.IND_ETIQUETA   
           END                                                                                                  AS IND_ETIQUETA,
           NVL(M.TXT_DESC_MACROSCOPICA,NULL)                                           AS IND_DESC_MACROSCOPICA,
           M.TXT_DESC_MICROSCOPICA                                                            AS TXT_DESC_MICROSCOPICA,
           M.TXT_DESC_MACROSCOPICA                                                           AS TXT_DESC_MACROSCOPICA,
           IMG_MACRO.NAME_IMG                                                                     AS NAME_IMG, 
           IMG_MACRO.IMG_DATA                                                                     AS IMG_DATA,   
           IMG_MACRO.ID_MAIN                                                                        AS ID_IMAGEN
       FROM 
           PABELLON.PB_HISTO_NMUESTRAS         M,
           PABELLON.PB_IMG_APMUESTRAS           IMG_MACRO
       WHERE
           M.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA)   
           AND
           M.ID_NMUESTRA = IMG_MACRO.ID_NMUESTRA (+) 
           AND
           IMG_MACRO.IND_ESTADO(+) IN (1)
           AND
           M.IND_TIPOMUESTRA IN (2)
           AND 
           M.IND_ESTADO = 1
           ORDER BY 
           M.N_MUESTRA;
           
           --------------------------------------------------------------------------------------     
   
    ----------------------------
   --LOGS POR MUESTRAS 
   ---------------------------
   OPEN P_AP_INFORMACION_ADICIONAL  FOR  
   SELECT 
   P.ID_LINETIMEHISTO, 
   P.ID_NUM_CARGA, 
   P.ID_SOLICITUD_HISTO                                                                          AS ID_SOLICITUD_HISTO, 
   P.TXT_BACODE, 
   P.NUM_FASE, 
   DECODE(P.NUM_FASE,
   '1','EN CUSTODIA',
   '2','EN TRASPORTE',
   '3','RECEPCIONADA',
   'SIN INFORMACION')                                                                               AS TXT_FASE, 
   DECODE(P.NUM_FASE,
   '1','#FFA534',
   '2','#23CCEF',
   '3','#87CB16',
   '#000000')                                                                                             AS IND_COLOR, 
   P.IND_CHECKED, 
   P.USR_CREA, 
   P.FEC_CREA,
   TO_CHAR(P.FEC_CREA, 'DD-MM-YYYY hh24:mi')                                       AS FECHA_CREACION_LOG,
   TO_CHAR(P.FEC_CREA,'YYYYMMDD')                                                       AS FECHA_CREACION_MOMENT,
   TO_CHAR(P.FEC_CREA,'YYYYMMDD hh24:mi')                                          AS FECHA_CREACION_MOMENT_HMS,
   P.IND_ESTADO                                                                                       AS IND_ESTADO, 
   P.ID_NMUESTRA                                                                                    AS ID_NMUESTRA, 
   P.ID_UID                                                                                                AS ID_UID,
   P.TXT_MUESTRA                                                                                   AS TXT_MUESTRA, 
   P.ID_CASETE                                                                                         AS ID_CASETE, 
   F.USERNAME                                                                                         AS TXT_USER,
   F.FIRST_NAME||' '|| F.MIDDLE_NAME||' '|| F.LAST_NAME                        AS TXT_EDITA
   FROM 
   PABELLON.PB_LINETIME_HISTO P,
   PABELLON.PB_HISTO_NMUESTRAS M,
   GUADMIN.FE_USERS F
   WHERE
   P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA)
   AND
    (P.ID_NMUESTRA = M.ID_NMUESTRA OR P.ID_CASETE = M.ID_CASETE)
   AND
   P.ID_UID = F.ID_UID
   ORDER BY 
   P.ID_LINETIMEHISTO,
    (CASE P.ID_CASETE  WHEN NULL THEN P.ID_CASETE  ELSE P.ID_NMUESTRA   END ) DESC,
   P.FEC_CREA ASC;
   
   --------------------------------------------------------------------------------------
   OPEN P_INFO_LOG_ADVERSOS  FOR  
   SELECT 
   P.ID_NMUESTRA,
   P.ID_ANTECEDENTES_HISTO,  
   P.ID_ANTECEDENTES_HISTO  AS ID_SOLICITUD_HISTO, 
   P.ID_LINETIMEHISTO, 
   P.ID_NUM_CARGA, 
   P.ID_SOLICITUD_HISTO, 
   P.ID_MOTIVO_DESAC, 
   P.TXT_EVENTO_OBSERVACION,
   M.DESCRIPCION
   FROM 
   PABELLON.PB_ANTECEDENTES_HISTO P,
   PABELLON.MOTIVOS_DESACTIVAR_M M
   WHERE
   P.ID_SOLICITUD_HISTO IN (V_ID_ANATOMIA) 
   AND 
   P.ID_MOTIVO_DESAC =  M.ID_MOTIVO_DESAC 
   AND
   P.IND_ESTADO IN (1);
   
   --------------------------------------------------------------------------------------
   --LISTA DE PATOLOGIOS
   IF V_COD_EMPRESA IN ('100') THEN 
               
       OPEN P_LISTA_PATOLOGOS  FOR 
       SELECT 
       G.ID_PROFESIONAL                                                                                AS ID_PROFESIONAL,
       UPPER (G.NOM_NOMBRE||' '|| G.NOM_APEPAT ||' '|| G.NOM_APEMAT)     AS TXT_PROFESIONAL,
       G.NOM_APEPAT||' '|| G.NOM_APEMAT ||' '|| G.NOM_NOMBRE                  AS PROFESIONAL_2,
       G.COD_RUTPRO||'-'|| G.COD_DIGVER                                                      AS RUT_PROFESIONAL
       FROM ADMIN.GG_TPROFESIONAL G
       WHERE
       G.COD_RUTPRO IN (14528409,26756634,16098500);
       
       
   ELSIF V_COD_EMPRESA IN ('106') THEN 
       
       OPEN P_LISTA_PATOLOGOS  FOR 
       SELECT 
       G.ID_PROFESIONAL                                                                                AS ID_PROFESIONAL,
       UPPER (G.NOM_NOMBRE||' '|| G.NOM_APEPAT ||' '|| G.NOM_APEMAT)     AS TXT_PROFESIONAL,
       G.NOM_APEPAT||' '|| G.NOM_APEMAT ||' '|| G.NOM_NOMBRE                  AS PROFESIONAL_2,
       G.COD_RUTPRO||'-'|| G.COD_DIGVER                                                      AS RUT_PROFESIONAL
       FROM ADMIN.GG_TPROFESIONAL G
       WHERE
       G.COD_RUTPRO IN (25787917,14528409);
           
   ELSE 
       
       OPEN P_LISTA_PATOLOGOS  FOR 
       SELECT 
       G.ID_PROFESIONAL                                                                                AS ID_PROFESIONAL,
       UPPER (G.NOM_NOMBRE||' '|| G.NOM_APEPAT ||' '|| G.NOM_APEMAT)     AS TXT_PROFESIONAL,
       G.NOM_APEPAT||' '|| G.NOM_APEMAT ||' '|| G.NOM_NOMBRE                  AS PROFESIONAL_2,
       G.COD_RUTPRO||'-'|| G.COD_DIGVER                                                      AS RUT_PROFESIONAL
       FROM ADMIN.GG_TPROFESIONAL G
       WHERE
       G.COD_RUTPRO IN (16869726,14528409);
       
       
   END IF;
   
END;
*/
